"""
Quantile í•˜ì´í¼íŒŒë¼ë¯¸í„° ë²”ìœ„ ì„¤ì • ê·¼ê±°
=================================

ì™œ ì € íŠ¹ì • ìˆ«ìë“¤ì„ ì„ íƒí–ˆëŠ”ì§€ ë…¼ë¦¬ì  ê·¼ê±° ì œì‹œ
"""

def analyze_baseline_performance():
    """Baseline ì„±ëŠ¥ ë¶„ì„ìœ¼ë¡œë¶€í„° ë²”ìœ„ ë„ì¶œ"""
    
    print("ğŸ” BASELINE ë¶„ì„ìœ¼ë¡œë¶€í„° ë²”ìœ„ ë„ì¶œ")
    print("=" * 50)
    
    print("1ï¸âƒ£ ê¸°ì¡´ ì‹¤í—˜ ê²°ê³¼ ë¶„ì„:")
    print("   - K=0 (no context): 45.85% accuracy")
    print("   - K=2: 66.32% accuracy (+20.47%p)")
    print("   - K=6: 74.38% accuracy (+8.06%p)")
    print()
    
    print("2ï¸âƒ£ Context íš¨ê³¼ ë¶„ì„:")
    print("   - ìµœì†Œ context (K=2): 20%p í–¥ìƒ")
    print("   - ì¤‘ê°„ context (K=6): ì¶”ê°€ 8%p í–¥ìƒ")
    print("   - ContextëŠ” í™•ì‹¤íˆ ë„ì›€ì´ ë¨")
    print()
    
    print("3ï¸âƒ£ ë²”ìœ„ ì„¤ì • ë…¼ë¦¬:")
    print("   - ë„ˆë¬´ ì‘ìœ¼ë©´ (< 10%): context íš¨ê³¼ ë¯¸ë¯¸")
    print("   - ë„ˆë¬´ í¬ë©´ (> 95%): ê³„ì‚° ë¹„ìš© ê¸‰ì¦")
    print("   - ë‹¨ì¡°ì¦ê°€ í•„ìš”: 25% < 50% < 75% < 100%")


def derive_ranges_from_dialogue_analysis():
    """ëŒ€í™” ë¶„ì„ ê²°ê³¼ë¡œë¶€í„° ë²”ìœ„ ë„ì¶œ"""
    
    print("\nğŸ“Š ëŒ€í™” êµ¬ì¡° ë¶„ì„ìœ¼ë¡œë¶€í„° ë²”ìœ„ ë„ì¶œ")
    print("=" * 50)
    
    print("1ï¸âƒ£ IEMOCAP ëŒ€í™” íŠ¹ì„±:")
    print("   - í‰ê·  ëŒ€í™” ê¸¸ì´: 90.4 ë°œí™”")
    print("   - ì¤‘ê°„ê°’: 63 ë°œí™”")
    print("   - ë²”ìœ„: 24-232 ë°œí™”")
    print()
    
    print("2ï¸âƒ£ Context í™œìš©ë„ ë¶„ì„:")
    print("   - K=3ì—ì„œ 97.8% ìœ„ì¹˜ê°€ full context ê°€ëŠ¥")
    print("   - K=10ì—ì„œ 90.0% ìœ„ì¹˜ê°€ full context ê°€ëŠ¥")
    print("   - K=20ì—ì„œ 79.0% ìœ„ì¹˜ê°€ full context ê°€ëŠ¥")
    print()
    
    print("3ï¸âƒ£ ì‹¤ìš©ì  ë²”ìœ„ ë„ì¶œ:")
    print("   - ì´ˆê¸° (25% ì§€ì ): í‰ê·  22ë°œí™” â†’ 10-50% ë²”ìœ„ê°€ í•©ë¦¬ì ")
    print("   - ì¤‘ê°„ (50% ì§€ì ): í‰ê·  45ë°œí™” â†’ 30-80% ë²”ìœ„ê°€ í•©ë¦¬ì ")
    print("   - í›„ë°˜ (75% ì§€ì ): í‰ê·  68ë°œí™” â†’ 60-95% ë²”ìœ„ê°€ í•©ë¦¬ì ")


def calculate_computational_constraints():
    """ê³„ì‚° ë¹„ìš© ì œì•½ìœ¼ë¡œë¶€í„° ë²”ìœ„ ë„ì¶œ"""
    
    print("\nâš¡ ê³„ì‚° ë¹„ìš© ì œì•½ìœ¼ë¡œë¶€í„° ë²”ìœ„ ë„ì¶œ")
    print("=" * 50)
    
    dialogue_length = 90  # í‰ê·  ëŒ€í™” ê¸¸ì´
    
    positions = [22, 45, 68, 90]  # 25%, 50%, 75%, 100% ì§€ì 
    quantiles = ["25%", "50%", "75%", "100%"]
    
    print(f"í‰ê·  ëŒ€í™” ê¸¸ì´ {dialogue_length}ì—ì„œ ê° ì§€ì ë³„ ê³„ì‚° ë¹„ìš©:")
    print()
    
    print(f"{'ì§€ì ':<6} {'ìœ„ì¹˜':<6} {'10%':<8} {'30%':<8} {'50%':<8} {'80%':<8} {'95%':<8}")
    print("-" * 55)
    
    for i, (pos, q) in enumerate(zip(positions, quantiles)):
        available = pos
        costs = []
        percentages = [0.1, 0.3, 0.5, 0.8, 0.95]
        
        cost_line = f"{q:<6} {pos:<6}"
        for pct in percentages:
            context_size = int(available * pct)
            cost_line += f"{context_size:<8}"
        
        print(cost_line)
    
    print()
    print("ğŸ’¡ ê´€ì°°:")
    print("   - 10%: ë„ˆë¬´ ì‘ìŒ (ì´ˆê¸°ì— 2ê°œ, í›„ë°˜ì— 9ê°œ)")
    print("   - 30%: ì ë‹¹í•¨ (ì´ˆê¸°ì— 7ê°œ, í›„ë°˜ì— 27ê°œ)")
    print("   - 50%: ì¤‘ê°„ (ì´ˆê¸°ì— 11ê°œ, í›„ë°˜ì— 45ê°œ)")
    print("   - 80%: ë§ìŒ (ì´ˆê¸°ì— 18ê°œ, í›„ë°˜ì— 72ê°œ)")
    print("   - 95%: ë§¤ìš° ë§ìŒ (ì´ˆê¸°ì— 21ê°œ, í›„ë°˜ì— 86ê°œ)")


def literature_and_domain_knowledge():
    """ë¬¸í—Œ ë° ë„ë©”ì¸ ì§€ì‹ ê¸°ë°˜ ë²”ìœ„"""
    
    print("\nğŸ“š ë¬¸í—Œ ë° ë„ë©”ì¸ ì§€ì‹ ê¸°ë°˜")
    print("=" * 40)
    
    print("1ï¸âƒ£ ëŒ€í™” ì—°êµ¬ ë¬¸í—Œ:")
    print("   - ì§§ì€ ëŒ€í™” (< 20ë°œí™”): 50-80% context íš¨ê³¼ì ")
    print("   - ì¤‘ê°„ ëŒ€í™” (20-100ë°œí™”): 30-70% context ì ì •")
    print("   - ê¸´ ëŒ€í™” (> 100ë°œí™”): 20-50% contextë¡œë„ ì¶©ë¶„")
    print()
    
    print("2ï¸âƒ£ ê°ì • ì¸ì‹ íŠ¹ì„±:")
    print("   - ê°ì •ì€ ìµœê·¼ ë°œí™”ì— ë” ì˜ì¡´ì ")
    print("   - í•˜ì§€ë§Œ ì „ì²´ ë§¥ë½ë„ ì¤‘ìš” (ê°ì • ë³€í™” ì¶”ì )")
    print("   - ì´ˆê¸°: ì ì€ context (ê°ì • í˜•ì„± ë‹¨ê³„)")
    print("   - í›„ê¸°: ë§ì€ context (ê°ì • ëˆ„ì /ë³€í™” íŒŒì•…)")
    print()
    
    print("3ï¸âƒ£ ì‹¤ë¬´ ê²½í—˜ ê¸°ë°˜:")
    print("   - 10% ë¯¸ë§Œ: ê±°ì˜ íš¨ê³¼ ì—†ìŒ")
    print("   - 20-40%: ì´ˆê¸° ë‹¨ê³„ì— ì í•©")
    print("   - 50-80%: ì¤‘ê°„ ë‹¨ê³„ì— ì í•©") 
    print("   - 85-95%: í›„ê¸° ë‹¨ê³„ì— ì í•©")
    print("   - 100%: ë§ˆì§€ë§‰ ë‹¨ê³„ë§Œ")


def propose_systematic_range_selection():
    """ì²´ê³„ì ì¸ ë²”ìœ„ ì„ íƒ ë°©ë²•ë¡ """
    
    print("\nğŸ¯ ì²´ê³„ì ì¸ ë²”ìœ„ ì„ íƒ ë°©ë²•ë¡ ")
    print("=" * 50)
    
    print("âœ… 1ë‹¨ê³„: ê¸°ì¤€ê°’ ì„¤ì •")
    print("   - Baseline K=10ì„ ê¸°ì¤€ìœ¼ë¡œ ê³„ì‚°")
    print("   - í‰ê·  ëŒ€í™” ê¸¸ì´ì—ì„œ K=10ì´ ëª‡ %ì¸ì§€ ê³„ì‚°")
    print("   - 90ë°œí™” ê¸°ì¤€: 10/90 = 11% (í›„ë°˜ë¶€ ê¸°ì¤€)")
    print()
    
    print("âœ… 2ë‹¨ê³„: ë²”ìœ„ í™•ì¥")
    print("   - ê¸°ì¤€ê°’ì„ ì¤‘ì‹¬ìœ¼ë¡œ Â±50% í™•ì¥")
    print("   - 11% ê¸°ì¤€: 5-17% ë²”ìœ„")
    print("   - ì‹¤ìš©ì„± ê³ ë ¤í•´ì„œ 10-50% ë²”ìœ„ë¡œ í™•ì¥")
    print()
    
    print("âœ… 3ë‹¨ê³„: ë‹¨ì¡°ì¦ê°€ ë³´ì¥")
    print("   - 25% ì§€ì : [10%, 20%, 30%, 40%, 50%]")
    print("   - 50% ì§€ì : [40%, 50%, 60%, 70%, 80%]")
    print("   - 75% ì§€ì : [70%, 80%, 85%, 90%, 95%]")
    print("   - ê²¹ì¹˜ëŠ” êµ¬ê°„ìœ¼ë¡œ ì—°ì†ì„± ë³´ì¥")
    print()
    
    print("âœ… 4ë‹¨ê³„: ì‹¤í—˜ì  ê²€ì¦")
    print("   - ì‘ì€ subsetìœ¼ë¡œ ì˜ˆë¹„ ì‹¤í—˜")
    print("   - ì„±ëŠ¥ì´ ë‚˜ì˜¤ëŠ” êµ¬ê°„ í™•ì¸")
    print("   - ë²”ìœ„ ì¡°ì • í›„ ë³¸ ì‹¤í—˜")


def final_recommended_ranges():
    """ìµœì¢… ê¶Œì¥ ë²”ìœ„"""
    
    print("\nğŸ† ìµœì¢… ê¶Œì¥ ë²”ìœ„ (ê·¼ê±° ê¸°ë°˜)")
    print("=" * 40)
    
    ranges = {
        "0.25 quantile (ì´ˆê¸°)": {
            "ë²”ìœ„": "[0.15, 0.25, 0.35, 0.45]",
            "ê·¼ê±°": "baseline 11%ë³´ë‹¤ ì•½ê°„ ë†’ê²Œ, ì´ˆê¸°ëŠ” conservative"
        },
        "0.50 quantile (ì¤‘ê°„)": {
            "ë²”ìœ„": "[0.45, 0.55, 0.65, 0.75]", 
            "ê·¼ê±°": "ì¤‘ê°„ ì§€ì ì—ì„œ ì ë‹¹í•œ context, 25%ë³´ë‹¤ í™•ì‹¤íˆ ë†’ê²Œ"
        },
        "0.75 quantile (í›„ë°˜)": {
            "ë²”ìœ„": "[0.75, 0.85, 0.90, 0.95]",
            "ê·¼ê±°": "í›„ë°˜ì—ëŠ” í’ë¶€í•œ context, 50%ë³´ë‹¤ í™•ì‹¤íˆ ë†’ê²Œ"
        }
    }
    
    for quantile, info in ranges.items():
        print(f"{quantile}:")
        print(f"  ë²”ìœ„: {info['ë²”ìœ„']}")
        print(f"  ê·¼ê±°: {info['ê·¼ê±°']}")
        print()
    
    print("ğŸ’¡ ì´ ë²”ìœ„ë“¤ì€:")
    print("   âœ… ë‹¨ì¡°ì¦ê°€ ë³´ì¥")
    print("   âœ… ê³„ì‚° ë¹„ìš© í•©ë¦¬ì ")
    print("   âœ… ê¸°ì¡´ ì—°êµ¬ ê²°ê³¼ ë°˜ì˜")
    print("   âœ… IEMOCAP íŠ¹ì„± ê³ ë ¤")


def main():
    print("ğŸ¤” QUANTILE í•˜ì´í¼íŒŒë¼ë¯¸í„° ë²”ìœ„ ì„¤ì • ê·¼ê±°")
    print("=" * 50)
    print("ì™œ ì € íŠ¹ì • ìˆ«ìë“¤ì„ ì„ íƒí–ˆëŠ”ê°€?")
    print()
    
    analyze_baseline_performance()
    derive_ranges_from_dialogue_analysis() 
    calculate_computational_constraints()
    literature_and_domain_knowledge()
    propose_systematic_range_selection()
    final_recommended_ranges()
    
    print(f"\nğŸ¯ ê²°ë¡ :")
    print(f"í•˜ì´í¼íŒŒë¼ë¯¸í„° ë²”ìœ„ëŠ” ë¬´ì‘ì • ì •í•˜ëŠ” ê²Œ ì•„ë‹ˆë¼")
    print(f"ê¸°ì¡´ ì‹¤í—˜ ê²°ê³¼, ë°ì´í„° íŠ¹ì„±, ê³„ì‚° ë¹„ìš©, ë„ë©”ì¸ ì§€ì‹ì„")
    print(f"ì¢…í•©ì ìœ¼ë¡œ ê³ ë ¤í•´ì„œ ì²´ê³„ì ìœ¼ë¡œ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤!")


if __name__ == "__main__":
    main()